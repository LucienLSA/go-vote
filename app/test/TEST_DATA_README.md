# 投票系统测试数据插入工具

## 概述

这个工具用于向投票系统数据库中插入测试数据，包括用户、投票、投票选项和一些投票记录。

## 测试数据内容

### 1. 测试用户 (4个)
- `admin` - 管理员用户
- `user1` - 普通用户1
- `user2` - 普通用户2  
- `user3` - 普通用户3

所有用户密码都是：`123456`

### 2. 测试投票 (5个)

#### 投票1: 你最喜欢的编程语言是什么？
- **类型**: 单选
- **状态**: 正常
- **时长**: 24小时
- **选项**: Go, Python, JavaScript, Java, C++

#### 投票2: 你使用过哪些开发工具？
- **类型**: 多选
- **状态**: 正常
- **时长**: 48小时
- **选项**: VS Code, IntelliJ IDEA, Vim, Sublime Text, Atom

#### 投票3: 你最喜欢的操作系统是什么？
- **类型**: 单选
- **状态**: 正常
- **时长**: 72小时
- **选项**: Windows, macOS, Linux, Ubuntu

#### 投票4: 你希望学习哪些技术？
- **类型**: 多选
- **状态**: 已结束
- **时长**: 1小时
- **选项**: 人工智能, 区块链, 云计算, 大数据, 物联网

#### 投票5: 你每天编程多长时间？
- **类型**: 单选
- **状态**: 正常
- **时长**: 7天
- **选项**: 1-2小时, 3-4小时, 5-6小时, 7-8小时, 8小时以上

### 3. 测试投票记录
工具会自动创建一些投票记录来模拟真实的投票行为。

## 使用方法

### 方法1: 使用命令行工具

1. 确保数据库已启动并配置正确
2. 在项目根目录运行：

```bash
go run cmd/insert_test_data/main.go
```

### 方法2: 在代码中调用

```go
package main

import (
    "govote/app/test"
)

func main() {
    // 插入测试数据
    test.InsertTestData()
    
    // 打印数据统计
    test.PrintTestData()
}
```

## 数据库要求

确保数据库连接配置正确，数据库表结构应该包含：

- `user` - 用户表
- `vote` - 投票表
- `vote_opt` - 投票选项表
- `vote_opt_user` - 用户投票记录表

## 预期输出

运行工具后，你应该看到类似以下的输出：

```
=== 投票系统测试数据插入工具 ===
开始插入测试数据...
插入测试用户...
成功插入用户: admin (ID: 1)
成功插入用户: user1 (ID: 2)
成功插入用户: user2 (ID: 3)
成功插入用户: user3 (ID: 4)
插入测试投票...
成功插入投票: 你最喜欢的编程语言是什么？ (ID: 1, 类型: 单选, 状态: 正常)
成功插入投票: 你使用过哪些开发工具？ (ID: 2, 类型: 多选, 状态: 正常)
...
插入测试投票选项...
成功插入选项: Go (投票ID: 1, 选项ID: 1)
成功插入选项: Python (投票ID: 1, 选项ID: 2)
...
插入测试投票记录...
成功插入投票记录: 用户2 投票给选项1 (投票1)
...

=== 测试数据统计 ===
用户总数: 4
投票总数: 5
投票选项总数: 24
投票记录总数: 11
=== 数据统计完成 ===

测试数据插入完成！
现在可以启动应用程序进行测试了。
```

## 测试场景

插入测试数据后，你可以测试以下场景：

1. **用户登录**: 使用任意测试用户登录
2. **查看投票列表**: 访问首页查看所有投票
3. **参与单选投票**: 测试单选投票功能
4. **参与多选投票**: 测试多选投票功能
5. **查看投票结果**: 查看投票统计结果
6. **重复投票检查**: 尝试重复投票验证防重复机制
7. **已结束投票**: 测试已结束投票的访问限制

## 注意事项

1. 运行前确保数据库连接正常
2. 如果数据库中已有数据，工具会继续添加新数据
3. 测试数据仅用于开发和测试环境
4. 生产环境请勿使用此工具

## 清理数据

如果需要清理测试数据，可以执行以下SQL：

```sql
DELETE FROM vote_opt_user;
DELETE FROM vote_opt;
DELETE FROM vote;
DELETE FROM user;
```

或者直接删除数据库重新创建。 